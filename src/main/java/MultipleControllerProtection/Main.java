package MultipleControllerProtection;
import java.io.IOException;


import org.jdom2.Attribute;
import org.jdom2.Document;
import org.jdom2.Element;
import org.jdom2.JDOMException;
import org.jdom2.Namespace;
import org.jdom2.output.DOMOutputter;
import org.jdom2.output.Format;
import org.jdom2.output.XMLOutputter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.util.ArrayList;
import java.util.List;
import org.w3c.dom.DOMImplementation;

import com.fasterxml.jackson.databind.annotation.JsonAppend.Attr;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;

import javax.xml.transform.TransformerFactory;
import javax.xml.transform.Transformer;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import org.w3c.dom.DOMImplementation;

public class Main {
	public static void main( String[] args ) throws Exception{
		List<String> jsonlist = new ArrayList<String>();
		int flow_entry_counter = 0;

		//コントローラを起動せずにテスト可能
		//String json = "{\"network-topology\":{\"topology\":[{\"topology-id\":\"flow:1\",\"node\":[{\"node-id\":\"openflow:2\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:2']\",\"termination-point\":[{\"tp-id\":\"openflow:2:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:2']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:2:1']\"},{\"tp-id\":\"openflow:2:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:2']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:2:LOCAL']\"},{\"tp-id\":\"openflow:2:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:2']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:2:2']\"}]},{\"node-id\":\"openflow:1\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:1']\",\"termination-point\":[{\"tp-id\":\"openflow:1:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:1']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:1:2']\"},{\"tp-id\":\"openflow:1:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:1']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:1:1']\"},{\"tp-id\":\"openflow:1:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:1']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:1:LOCAL']\"},{\"tp-id\":\"openflow:1:3\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:1']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:1:3']\"}]},{\"node-id\":\"openflow:4\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:4']\",\"termination-point\":[{\"tp-id\":\"openflow:4:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:4']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:4:1']\"},{\"tp-id\":\"openflow:4:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:4']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:4:LOCAL']\"},{\"tp-id\":\"openflow:4:3\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:4']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:4:3']\"},{\"tp-id\":\"openflow:4:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:4']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:4:2']\"}]},{\"node-id\":\"openflow:3\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:3']\",\"termination-point\":[{\"tp-id\":\"openflow:3:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:3']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:3:LOCAL']\"},{\"tp-id\":\"openflow:3:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:3']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:3:2']\"},{\"tp-id\":\"openflow:3:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:3']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:3:1']\"},{\"tp-id\":\"openflow:3:3\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:3']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:3:3']\"}]},{\"node-id\":\"openflow:14\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:14']\",\"termination-point\":[{\"tp-id\":\"openflow:14:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:14']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:14:2']\"},{\"tp-id\":\"openflow:14:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:14']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:14:LOCAL']\"},{\"tp-id\":\"openflow:14:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:14']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:14:1']\"}]},{\"node-id\":\"host:92:7a:11:55:e1:ca\",\"host-tracker-service:attachment-points\":[{\"tp-id\":\"openflow:1:1\",\"corresponding-tp\":\"host:92:7a:11:55:e1:ca\",\"active\":true}],\"host-tracker-service:addresses\":[{\"id\":14,\"last-seen\":1468282471041,\"first-seen\":1468282471041,\"mac\":\"92:7a:11:55:e1:ca\",\"ip\":\"10.0.0.1\"}],\"host-tracker-service:id\":\"92:7a:11:55:e1:ca\",\"termination-point\":[{\"tp-id\":\"host:92:7a:11:55:e1:ca\"}]},{\"node-id\":\"openflow:13\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:13']\",\"termination-point\":[{\"tp-id\":\"openflow:13:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:13']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:13:LOCAL']\"},{\"tp-id\":\"openflow:13:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:13']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:13:1']\"},{\"tp-id\":\"openflow:13:3\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:13']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:13:3']\"},{\"tp-id\":\"openflow:13:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:13']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:13:2']\"}]},{\"node-id\":\"openflow:12\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:12']\",\"termination-point\":[{\"tp-id\":\"openflow:12:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:12']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:12:2']\"},{\"tp-id\":\"openflow:12:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:12']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:12:1']\"},{\"tp-id\":\"openflow:12:3\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:12']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:12:3']\"},{\"tp-id\":\"openflow:12:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:12']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:12:LOCAL']\"}]}],\"link\":[{\"link-id\":\"openflow:13:2\",\"destination\":{\"dest-tp\":\"openflow:12:3\",\"dest-node\":\"openflow:12\"},\"source\":{\"source-node\":\"openflow:13\",\"source-tp\":\"openflow:13:2\"}},{\"link-id\":\"openflow:13:1\",\"destination\":{\"dest-tp\":\"openflow:3:3\",\"dest-node\":\"openflow:3\"},\"source\":{\"source-node\":\"openflow:13\",\"source-tp\":\"openflow:13:1\"}},{\"link-id\":\"openflow:4:3\",\"destination\":{\"dest-tp\":\"openflow:12:1\",\"dest-node\":\"openflow:12\"},\"source\":{\"source-node\":\"openflow:4\",\"source-tp\":\"openflow:4:3\"}},{\"link-id\":\"host:92:7a:11:55:e1:ca/openflow:1:1\",\"destination\":{\"dest-tp\":\"openflow:1:1\",\"dest-node\":\"openflow:1\"},\"source\":{\"source-node\":\"host:92:7a:11:55:e1:ca\",\"source-tp\":\"host:92:7a:11:55:e1:ca\"}},{\"link-id\":\"openflow:5:1\",\"destination\":{\"dest-tp\":\"openflow:4:2\",\"dest-node\":\"openflow:4\"},\"source\":{\"source-node\":\"openflow:5\",\"source-tp\":\"openflow:5:1\"}},{\"link-id\":\"openflow:12:1\",\"destination\":{\"dest-tp\":\"openflow:4:3\",\"dest-node\":\"openflow:4\"},\"source\":{\"source-node\":\"openflow:12\",\"source-tp\":\"openflow:12:1\"}},{\"link-id\":\"openflow:13:3\",\"destination\":{\"dest-tp\":\"openflow:14:2\",\"dest-node\":\"openflow:14\"},\"source\":{\"source-node\":\"openflow:13\",\"source-tp\":\"openflow:13:3\"}},{\"link-id\":\"openflow:12:3\",\"destination\":{\"dest-tp\":\"openflow:13:2\",\"dest-node\":\"openflow:13\"},\"source\":{\"source-node\":\"openflow:12\",\"source-tp\":\"openflow:12:3\"}},{\"link-id\":\"openflow:1:3\",\"destination\":{\"dest-tp\":\"openflow:14:1\",\"dest-node\":\"openflow:14\"},\"source\":{\"source-node\":\"openflow:1\",\"source-tp\":\"openflow:1:3\"}},{\"link-id\":\"openflow:11:3\",\"destination\":{\"dest-tp\":\"openflow:12:2\",\"dest-node\":\"openflow:12\"},\"source\":{\"source-node\":\"openflow:11\",\"source-tp\":\"openflow:11:3\"}},{\"link-id\":\"openflow:4:1\",\"destination\":{\"dest-tp\":\"openflow:3:2\",\"dest-node\":\"openflow:3\"},\"source\":{\"source-node\":\"openflow:4\",\"source-tp\":\"openflow:4:1\"}},{\"link-id\":\"openflow:1:2\",\"destination\":{\"dest-tp\":\"openflow:2:1\",\"dest-node\":\"openflow:2\"},\"source\":{\"source-node\":\"openflow:1\",\"source-tp\":\"openflow:1:2\"}},{\"link-id\":\"openflow:1:1/host:92:7a:11:55:e1:ca\",\"destination\":{\"dest-tp\":\"host:92:7a:11:55:e1:ca\",\"dest-node\":\"host:92:7a:11:55:e1:ca\"},\"source\":{\"source-node\":\"openflow:1\",\"source-tp\":\"openflow:1:1\"}},{\"link-id\":\"openflow:2:1\",\"destination\":{\"dest-tp\":\"openflow:1:2\",\"dest-node\":\"openflow:1\"},\"source\":{\"source-node\":\"openflow:2\",\"source-tp\":\"openflow:2:1\"}},{\"link-id\":\"openflow:14:1\",\"destination\":{\"dest-tp\":\"openflow:1:3\",\"dest-node\":\"openflow:1\"},\"source\":{\"source-node\":\"openflow:14\",\"source-tp\":\"openflow:14:1\"}},{\"link-id\":\"openflow:2:2\",\"destination\":{\"dest-tp\":\"openflow:3:1\",\"dest-node\":\"openflow:3\"},\"source\":{\"source-node\":\"openflow:2\",\"source-tp\":\"openflow:2:2\"}},{\"link-id\":\"openflow:14:2\",\"destination\":{\"dest-tp\":\"openflow:13:3\",\"dest-node\":\"openflow:13\"},\"source\":{\"source-node\":\"openflow:14\",\"source-tp\":\"openflow:14:2\"}},{\"link-id\":\"openflow:3:1\",\"destination\":{\"dest-tp\":\"openflow:2:2\",\"dest-node\":\"openflow:2\"},\"source\":{\"source-node\":\"openflow:3\",\"source-tp\":\"openflow:3:1\"}},{\"link-id\":\"openflow:3:2\",\"destination\":{\"dest-tp\":\"openflow:4:1\",\"dest-node\":\"openflow:4\"},\"source\":{\"source-node\":\"openflow:3\",\"source-tp\":\"openflow:3:2\"}},{\"link-id\":\"openflow:3:3\",\"destination\":{\"dest-tp\":\"openflow:13:1\",\"dest-node\":\"openflow:13\"},\"source\":{\"source-node\":\"openflow:3\",\"source-tp\":\"openflow:3:3\"}}]},{\"topology-id\":\"example-ipv6-topology\",\"topology-types\":{},\"server-provided\":true},{\"topology-id\":\"example-ipv4-topology\",\"topology-types\":{},\"server-provided\":true},{\"topology-id\":\"example-linkstate-topology\",\"topology-types\":{},\"server-provided\":true}]}}";
		//String json2 = "{\"network-topology\":{\"topology\":[{\"topology-id\":\"flow:1\",\"node\":[{\"node-id\":\"openflow:10\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:10']\",\"termination-point\":[{\"tp-id\":\"openflow:10:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:10']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:10:LOCAL']\"},{\"tp-id\":\"openflow:10:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:10']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:10:1']\"},{\"tp-id\":\"openflow:10:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:10']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:10:2']\"},{\"tp-id\":\"openflow:10:3\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:10']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:10:3']\"}]},{\"node-id\":\"openflow:11\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:11']\",\"termination-point\":[{\"tp-id\":\"openflow:11:3\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:11']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:11:3']\"},{\"tp-id\":\"openflow:11:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:11']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:11:2']\"},{\"tp-id\":\"openflow:11:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:11']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:11:1']\"},{\"tp-id\":\"openflow:11:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:11']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:11:LOCAL']\"}]},{\"node-id\":\"openflow:5\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:5']\",\"termination-point\":[{\"tp-id\":\"openflow:5:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:5']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:5:1']\"},{\"tp-id\":\"openflow:5:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:5']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:5:2']\"},{\"tp-id\":\"openflow:5:3\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:5']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:5:3']\"},{\"tp-id\":\"openflow:5:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:5']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:5:LOCAL']\"}]},{\"node-id\":\"openflow:6\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:6']\",\"termination-point\":[{\"tp-id\":\"openflow:6:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:6']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:6:LOCAL']\"},{\"tp-id\":\"openflow:6:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:6']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:6:1']\"},{\"tp-id\":\"openflow:6:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:6']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:6:2']\"},{\"tp-id\":\"openflow:6:3\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:6']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:6:3']\"}]},{\"node-id\":\"host:7a:0a:74:f4:be:f8\",\"host-tracker-service:attachment-points\":[{\"tp-id\":\"openflow:8:1\",\"corresponding-tp\":\"host:7a:0a:74:f4:be:f8\",\"active\":true}],\"host-tracker-service:addresses\":[{\"id\":2,\"last-seen\":1468307736994,\"first-seen\":1468307736994,\"mac\":\"7a:0a:74:f4:be:f8\",\"ip\":\"10.0.0.2\"}],\"host-tracker-service:id\":\"7a:0a:74:f4:be:f8\",\"termination-point\":[{\"tp-id\":\"host:7a:0a:74:f4:be:f8\"}]},{\"node-id\":\"openflow:7\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:7']\",\"termination-point\":[{\"tp-id\":\"openflow:7:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:7']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:7:1']\"},{\"tp-id\":\"openflow:7:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:7']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:7:LOCAL']\"},{\"tp-id\":\"openflow:7:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:7']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:7:2']\"}]},{\"node-id\":\"openflow:8\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:8']\",\"termination-point\":[{\"tp-id\":\"openflow:8:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:8']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:8:2']\"},{\"tp-id\":\"openflow:8:3\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:8']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:8:3']\"},{\"tp-id\":\"openflow:8:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:8']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:8:1']\"},{\"tp-id\":\"openflow:8:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:8']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:8:LOCAL']\"}]},{\"node-id\":\"openflow:9\",\"opendaylight-topology-inventory:inventory-node-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:9']\",\"termination-point\":[{\"tp-id\":\"openflow:9:LOCAL\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:9']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:9:LOCAL']\"},{\"tp-id\":\"openflow:9:2\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:9']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:9:2']\"},{\"tp-id\":\"openflow:9:1\",\"opendaylight-topology-inventory:inventory-node-connector-ref\":\"/opendaylight-inventory:nodes/opendaylight-inventory:node[opendaylight-inventory:id='openflow:9']/opendaylight-inventory:node-connector[opendaylight-inventory:id='openflow:9:1']\"}]}],\"link\":[{\"link-id\":\"openflow:11:2\",\"destination\":{\"dest-tp\":\"openflow:10:3\",\"dest-node\":\"openflow:10\"},\"source\":{\"source-node\":\"openflow:11\",\"source-tp\":\"openflow:11:2\"}},{\"link-id\":\"openflow:11:1\",\"destination\":{\"dest-tp\":\"openflow:5:3\",\"dest-node\":\"openflow:5\"},\"source\":{\"source-node\":\"openflow:11\",\"source-tp\":\"openflow:11:1\"}},{\"link-id\":\"openflow:7:1\",\"destination\":{\"dest-tp\":\"openflow:6:2\",\"dest-node\":\"openflow:6\"},\"source\":{\"source-node\":\"openflow:7\",\"source-tp\":\"openflow:7:1\"}},{\"link-id\":\"openflow:7:2\",\"destination\":{\"dest-tp\":\"openflow:8:2\",\"dest-node\":\"openflow:8\"},\"source\":{\"source-node\":\"openflow:7\",\"source-tp\":\"openflow:7:2\"}},{\"link-id\":\"openflow:6:2\",\"destination\":{\"dest-tp\":\"openflow:7:1\",\"dest-node\":\"openflow:7\"},\"source\":{\"source-node\":\"openflow:6\",\"source-tp\":\"openflow:6:2\"}},{\"link-id\":\"openflow:6:1\",\"destination\":{\"dest-tp\":\"openflow:5:2\",\"dest-node\":\"openflow:5\"},\"source\":{\"source-node\":\"openflow:6\",\"source-tp\":\"openflow:6:1\"}},{\"link-id\":\"openflow:6:3\",\"destination\":{\"dest-tp\":\"openflow:10:1\",\"dest-node\":\"openflow:10\"},\"source\":{\"source-node\":\"openflow:6\",\"source-tp\":\"openflow:6:3\"}},{\"link-id\":\"openflow:10:3\",\"destination\":{\"dest-tp\":\"openflow:11:2\",\"dest-node\":\"openflow:11\"},\"source\":{\"source-node\":\"openflow:10\",\"source-tp\":\"openflow:10:3\"}},{\"link-id\":\"openflow:12:2\",\"destination\":{\"dest-tp\":\"openflow:11:3\",\"dest-node\":\"openflow:11\"},\"source\":{\"source-node\":\"openflow:12\",\"source-tp\":\"openflow:12:2\"}},{\"link-id\":\"openflow:10:2\",\"destination\":{\"dest-tp\":\"openflow:9:2\",\"dest-node\":\"openflow:9\"},\"source\":{\"source-node\":\"openflow:10\",\"source-tp\":\"openflow:10:2\"}},{\"link-id\":\"openflow:4:2\",\"destination\":{\"dest-tp\":\"openflow:5:1\",\"dest-node\":\"openflow:5\"},\"source\":{\"source-node\":\"openflow:4\",\"source-tp\":\"openflow:4:2\"}},{\"link-id\":\"openflow:10:1\",\"destination\":{\"dest-tp\":\"openflow:6:3\",\"dest-node\":\"openflow:6\"},\"source\":{\"source-node\":\"openflow:10\",\"source-tp\":\"openflow:10:1\"}},{\"link-id\":\"host:7a:0a:74:f4:be:f8/openflow:8:1\",\"destination\":{\"dest-tp\":\"openflow:8:1\",\"dest-node\":\"openflow:8\"},\"source\":{\"source-node\":\"host:7a:0a:74:f4:be:f8\",\"source-tp\":\"host:7a:0a:74:f4:be:f8\"}},{\"link-id\":\"openflow:8:2\",\"destination\":{\"dest-tp\":\"openflow:7:2\",\"dest-node\":\"openflow:7\"},\"source\":{\"source-node\":\"openflow:8\",\"source-tp\":\"openflow:8:2\"}},{\"link-id\":\"openflow:8:3\",\"destination\":{\"dest-tp\":\"openflow:9:1\",\"dest-node\":\"openflow:9\"},\"source\":{\"source-node\":\"openflow:8\",\"source-tp\":\"openflow:8:3\"}},{\"link-id\":\"openflow:9:2\",\"destination\":{\"dest-tp\":\"openflow:10:2\",\"dest-node\":\"openflow:10\"},\"source\":{\"source-node\":\"openflow:9\",\"source-tp\":\"openflow:9:2\"}},{\"link-id\":\"openflow:8:1/host:7a:0a:74:f4:be:f8\",\"destination\":{\"dest-tp\":\"host:7a:0a:74:f4:be:f8\",\"dest-node\":\"host:7a:0a:74:f4:be:f8\"},\"source\":{\"source-node\":\"openflow:8\",\"source-tp\":\"openflow:8:1\"}},{\"link-id\":\"openflow:9:1\",\"destination\":{\"dest-tp\":\"openflow:8:3\",\"dest-node\":\"openflow:8\"},\"source\":{\"source-node\":\"openflow:9\",\"source-tp\":\"openflow:9:1\"}}]},{\"topology-id\":\"example-ipv6-topology\",\"topology-types\":{},\"server-provided\":true},{\"topology-id\":\"example-ipv4-topology\",\"topology-types\":{},\"server-provided\":true},{\"topology-id\":\"example-linkstate-topology\",\"topology-types\":{},\"server-provided\":true}]}}";

		//コントローラ起動時トポロジ情報をJSONで取得
		//コントローラ1
		String ControllerIP1="192.168.56.1";
		String uri ="http://"+ControllerIP1+":8181/restconf/operational/network-topology:network-topology/";
		RestRequest getJson = new RestRequest(); 
		String json =getJson.GetJSON(uri); 
		jsonlist.add(json);
		//コントローラ2
		String ControllerIP2="192.168.56.101";
		String uri2 ="http://"+ControllerIP2+":8181/restconf/operational/network-topology:network-topology/";
		RestRequest getJson2 = new RestRequest(); 
		String json2 =getJson2.GetJSON(uri2); 
		jsonlist.add(json2);

		//TopologyクラスでJSON情報の整理
		//JSONから必要な情報を取得->グラフ作成＆ノードクラスに必要情報追加
		//タイセットとタイセットグラフの作成（派生情報の作成）
		
		
		Topology topology = new Topology(jsonlist);
		topology.getTopologyInfo();
		//複数コントローラの場合ノードに所属コントローラのIPを保持させる
		topology.setControllerIP(ControllerIP1, ControllerIP2);
		topology.test();
		
		//Flow_Add
		MakeFlow makeflow = new MakeFlow();
		
		DropAction dropaction = new DropAction(topology.globalNode);
		dropaction.dropAction();
		
		long start = System.currentTimeMillis();
		
		TiesetNodeFlow tiesetnodeflow = new TiesetNodeFlow(topology.tiesetList, topology.globalGraph, topology.TiesetGraph);
		tiesetnodeflow.makeTiesetFlow();
		
		BorderNodeFlow bordernodeflow = new BorderNodeFlow(topology.tiesetList, topology.globalGraph, topology.TiesetGraph, topology.globalNode, topology.globalNode_ID);
		bordernodeflow.makeBorderFlow();
		
		EdgeNodeFlow edgenodeflow = new EdgeNodeFlow(topology.tiesetList, topology.globalGraph, topology.TiesetGraph, topology.globalNode, topology.globalNode_ID);
		edgenodeflow.makeEdgeFlow();
		
		CoreNodeFlow corenodeflow = new CoreNodeFlow(topology.tiesetList, topology.globalGraph, topology.TiesetGraph, topology.globalNode, topology.globalNode_ID);
		corenodeflow.CoreNodeFlow();
		
		long end = System.currentTimeMillis();
		long interval = end - start;
		System.out.println(interval + "ミリ秒");
		
		int flow_counter = corenodeflow.get_flow_counter();
		System.out.println(flow_counter);
		System.out.println("完了！");
	}
}
